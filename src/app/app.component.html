<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />


<div class="header">
  <h1>Split Bill</h1>
</div>

<div class="main">
  <button class="btn btn-lg btn-outline-primary" (click)="open()">Add new itens</button>

  <div class="row">
    <ng-container *ngFor="let item of itens">

      <div draggable="true" class="item-draggable col" (dragstart)="onDragStart($event)" #itemDraggable>
        <div class="row">

          <span class="material-symbols-outlined" *ngIf="item.icon === 'drink'">
            local_bar
            </span>

          <span class="material-symbols-outlined" *ngIf="item.icon === 'beer'">
            sports_bar
            </span>

            <span class="material-symbols-outlined" *ngIf="item.icon === 'food'">
              local_pizza
              </span>
          
          <span class="material-symbols-outlined" *ngIf="item.icon === 'cart'">
            shopping_cart
            </span>

        </div>
        <span style="display: none;">/{{item.icon}}/</span>

        <span style="white-space: nowrap">{{ item.value }} €</span>

      </div>
    </ng-container>
  </div>

  <div class="drop-zone" (dragover)="onDragOver($event)" (drop)="onDrop($event, 'daniel')">
    <p> 
      <button (click)="revert('daniel')" class="btn btn-sm btn-outline-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
          <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
        </svg>
      </button>
      Daniel
    </p>
    
    <ng-container *ngFor="let entry of bill | keyvalue">
      <ng-container *ngIf="entry.key === 'daniel'">
        <ng-container *ngFor="let item of entry.value">
          <div class="container">
            <div class="row">
              <div class="left col">
                {{item.icon | titlecase }} <small>({{item.datetime | date:'HH:mm:ss'}})</small>
              </div>
              <div class="right col">{{item.value}} €</div>
            </div>
          </div>
        </ng-container>
        <p class="total">Total: {{ calculateSum(entry.value) }} €</p>
      </ng-container>
    </ng-container>
  </div>

  <div class="drop-zone " (dragover)="onDragOver($event)" (drop)="onDrop($event, 'andrey')">
    <p>
      <button (click)="revert('andrey')" class="btn btn-sm btn-outline-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
          <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
      </svg>
    </button>
      Andrey
    </p>
     <ng-container *ngFor="let entry of bill | keyvalue">
      <ng-container *ngIf="entry.key === 'andrey'">
        <ng-container *ngFor="let item of entry.value">
          <div class="container">
            <div class="row">
              <div class="left col">
                {{item.icon | titlecase }} <small>({{item.datetime | date:'HH:mm:ss'}})</small>
              </div>
              <div class="right col">{{item.value}} €</div>
            </div>
          </div>
        </ng-container>
        <p class="total">Total: {{ calculateSum(entry.value) }} €</p>
      </ng-container>
    </ng-container>
  </div>

  <div class="drop-zone " (dragover)="onDragOver($event)" (drop)="onDrop($event, 'bruno')">
    <p>
      <button (click)="revert('bruno')" class="btn btn-sm btn-outline-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
          <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
      </svg>
    </button>
      Bruno
    </p>
     <ng-container *ngFor="let entry of bill | keyvalue">
      <ng-container *ngIf="entry.key === 'bruno'">
        <ng-container *ngFor="let item of entry.value">
          <div class="container">
            <div class="row">
              <div class="left col">
                {{item.icon | titlecase }} <small>({{item.datetime | date:'HH:mm:ss'}})</small>
              </div>
              <div class="right col">{{item.value}} €</div>
            </div>
          </div>
        </ng-container>
        <p class="total">Total: {{ calculateSum(entry.value) }} €</p>
      </ng-container>
    </ng-container>
  </div>
</div>

